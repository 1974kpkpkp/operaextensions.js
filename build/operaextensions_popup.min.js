// operaextensions_popup.min.js - http://github.com/operasoftware/operaextensions.js
'use strict';!function(b){function y(a,c,f){v?a[c].apply(a,f):r.push({target:a,methodName:c,args:f})}function s(a,c){function f(a,c,f){0>f&&(f+=1);1<f&&(f-=1);return f<1/6?a+6*(c-a)*f:0.5>f?c:f<2/3?a+6*(c-a)*(2/3-f):a}function e(a){a=parseInt(a,10);a=a.toString(16);return 0==a?"00":a}if(void 0===a||null===a)return a;"[object Array]"===Object.prototype.toString.call(a)&&(a=4===a.length?"rgba("+a[0]+","+a[1]+","+a[2]+","+a[3]+")":3===a.length?"rgb("+a[0]+","+a[1]+","+a[2]+")":"rgb(255,255,255)");var a=
a+"",g={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,
144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,
216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,
170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,
128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}[a.toLowerCase()];if(g)return"#"+e(g[0])+e(g[1])+e(g[2]);var g={hexLong:/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hexShort:/^#([0-9a-fA-F]{3})$/},b;for(b in g)if(a.match(g[b]))return a;
b=[["rgb",/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/],["rgb",/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d+(?:\.\d+)?|\.\d+)\s*\)$/],["hsl",/^hsl\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%\)$/],["hsl",/^hsla\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%,\s*(\d+(?:\.\d+)?|\.\d+)\s*\)$/],["hsv",/^hsv\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%\)$/]];for(var g={rgb:function(a){return[a[1],a[2],a[3],a[4]||1]},hsl:function(a){var c=parseInt(a[1],10)%360/360,e=parseInt(a[2],10)%101/100,b=parseInt(a[3],10)%101/
100,a=a[4]||1;if(0===e)return[b,b,b];e=0.5>b?b*(1+e):b+e-b*e;b=2*b-e;return[(256*f(b,e,c+1/3)).toFixed(0),(256*f(b,e,c)).toFixed(0),(256*f(b,e,c-1/3)).toFixed(0),a]},hsv:function(a){var c,f,e,b=parseInt(a[1],10)%360/360,g=parseInt(a[2],10)%101/100,a=parseInt(a[3],10)%101/100,d=Math.floor(6*b),L=6*b-d,b=a*(1-g),h=a*(1-L*g),g=a*(1-(1-L)*g);switch(d%6){case 0:c=a;f=g;e=b;break;case 1:c=h;f=a;e=b;break;case 2:c=b;f=a;e=g;break;case 3:c=b;f=h;e=a;break;case 4:c=g;f=b;e=a;break;case 5:c=a,f=b,e=h}return[256*
c,256*f,256*e]}},d=0,h=b.length;d<h;d++){var i=b[d][1].exec(a);if(i)return b=g[b[d][0]](i),g=parseFloat(b[3]||1),b="NaN"===g+""||0>g||1<=g?b:0==g?[255,255,255]:[g*parseInt(b[0],10)+(1-g)*(c||255),g*parseInt(b[1],10)+(1-g)*(c||255),g*parseInt(b[2],10)+(1-g)*(c||255)],"#"+e(b[0]||255)+e(b[1]||255)+e(b[2]||255)}return"#f00"}var d=function(){};d.prototype.REVISION="1";d.prototype.version=function(){return this.REVISION};d.prototype.buildNumber=function(){return this.REVISION};d.prototype.postError=function(a){console.log(a)};
var p=b.opera||new d,D=chrome.app.getDetails(),v=!1,r=[],z={WIDGET_API_LOADED:!1,WIDGET_PREFERENCES_LOADED:!1,TOOLBAR_CONTEXT_LOADED:!1},w={},d="undefined"!==typeof window?window:{},d=d.MutationObserver||d.WebKitMutationObserver;if("undefined"!==typeof process&&"[object process]"==={}.toString.call(process))d=function(a,c){process.nextTick(function(){a.call(c)})};else if(d){var H=[],d=new d(function(){var a=H.slice();H=[];a.forEach(function(a){a[0].call(a[1])})}),M=document.createElement("div");d.observe(M,
{attributes:!0});d=function(a,c){H.push([a,c]);M.setAttribute("drainQueue","drainQueue")}}else d=function(a,c){setTimeout(function(){a.call(c)},1)};w.async=d;var V=w.Event=function(a,c){this.type=a;for(var f in c)c.hasOwnProperty(f)&&(this[f]=c[f])},N=function(a,c){for(var f=0,e=a.length;f<e;f++)if(a[f][0]===c)return f;return-1},I=function(a){var c=a._promiseCallbacks;c||(c=a._promiseCallbacks={});return c},A=w.EventTarget={mixin:function(a){a.on=this.on;a.off=this.off;a.trigger=this.trigger;return a},
on:function(a,c,f){for(var e=I(this),b,d,a=a.split(/\s+/),f=f||this;d=a.shift();)(b=e[d])||(b=e[d]=[]),-1===N(b,c)&&b.push([c,f])},off:function(a,c){for(var f=I(this),b,g,a=a.split(/\s+/);b=a.shift();)c?(b=f[b],g=N(b,c),-1!==g&&b.splice(g,1)):f[b]=[]},trigger:function(a,c){var f,b,g,d;if(f=I(this)[a])for(var h=0,i=f.length;h<i;h++)b=f[h],g=b[0],b=b[1],"object"!==typeof c&&(c={detail:c}),d=new V(a,c),g.call(b,d)}},m=w.Promise=function(){this.on("promise:resolved",function(a){this.trigger("success",
{detail:a.detail})},this);this.on("promise:failed",function(a){this.trigger("error",{detail:a.detail})},this)},O=function(){},P=function(a,c,b,e){var g,d;if(b)try{g=b(e.detail)}catch(h){d=h}else g=e.detail;if(g instanceof m)g.then(function(a){c.resolve(a)},function(a){c.reject(a)});else if(b&&g)c.resolve(g);else if(d)c.reject(d);else c[a](g)};m.prototype={then:function(a,c){var b=new m;this.on("promise:resolved",function(c){P("resolve",b,a,c)});this.on("promise:failed",function(a){P("reject",b,c,
a)});return b},resolve:function(a){w.async(function(){this.trigger("promise:resolved",{detail:a});this.isResolved=a},this);this.reject=this.resolve=O},reject:function(a){w.async(function(){this.trigger("promise:failed",{detail:a});this.isRejected=a},this);this.reject=this.resolve=O}};A.mixin(m.prototype);var n=function(a,c){var b=document.createEvent("Event");b.initEvent(a,!0,!0);for(var e in c)b[e]=c[e];return b},d=function(){A.mixin(this)};d.prototype.constructor=d;d.prototype.addEventListener=
function(a,c){this.on(a,c)};d.prototype.removeEventListener=function(a,c){this.off(a,c)};d.prototype.dispatchEvent=function(a){var c=a.type;if("function"===typeof this["on"+c.toLowerCase()])this.on(c,this["on"+c.toLowerCase()]);this.trigger(c,a)};var B=function(){m.call(this)};B.prototype=Object.create(m.prototype);for(var l in d.prototype)B.prototype[l]=d.prototype[l];var j,K=function(){E=!1;J()},J=function(){if(!E){E=!0;var a=Q.shift();if(void 0===a)E=!1;else if(a.obj.isResolved)a.fn.call(a.obj,
K);else if(a.ignoreResolve)a.fn.call(a.obj,K);else{var c=b.setTimeout(function(){console.warn("PromiseQueue deadlock broken with timeout.");console.log(a.obj);console.log(a.obj.isResolved);a.obj.trigger("promise:resolved")},W);a.obj.on("promise:resolved",function(){c&&b.clearTimeout(c);a.obj.isResolved=!0;a.fn.call(a.obj,K)})}}},Q=[],E=!1,W=1E3;j={enqueue:function(a,c,b){Q.push({obj:a,fn:c,ignoreResolve:b});J()},dequeue:function(){J()}};var F=function(a){A.mixin(this);this._isBackground=a||!1;this._localPort=
null;this._isBackground||(this._localPort=chrome.extension.connect({name:""+Math.floor(1E16*Math.random())}),this._localPort.onDisconnect.addListener(function(){this.dispatchEvent(new n("disconnect",{source:this._localPort}));this._localPort=null}.bind(this)),a=function(a,b,e){var g=this._localPort;a&&a.action&&0===a.action.indexOf("___O_")?this.dispatchEvent(new n("controlmessage",{data:a,source:{postMessage:function(a){g.postMessage(a)},tabId:b&&b.tab?b.tab.id:null}})):y(this,"dispatchEvent",[new n("message",
{data:a,source:{postMessage:function(a){g.postMessage(a)},tabId:b&&b.tab?b.tab.id:null}})]);e&&e({})}.bind(this),this._localPort.onMessage.addListener(a),chrome.extension.onMessage.addListener(a),y(this,"dispatchEvent",[new n("connect",{source:this._localPort})]))};F.prototype=Object.create(d.prototype);F.prototype.postMessage=function(a){this._isBackground?this.broadcastMessage(a):this._localPort&&this._localPort.postMessage(a)};var h=function(){F.call(this,!1)};h.prototype=Object.create(F.prototype);
h.prototype.__defineGetter__("bgProcess",function(){return chrome.extension.getBackgroundPage()});var q=p.extension=p.extension||new h;l=p.contexts=p.contexts||{};h.prototype.getFile=function(a){var c=null;if("string"!=typeof a)return c;try{var b=chrome.extension.getURL("");0==a.indexOf("widget:")&&(a=a.replace("widget:","chrome-extension:"));0==a.indexOf("/")&&(a=a.substring(1));var a=(-1==a.indexOf(b)?b:"")+a,e=new XMLHttpRequest;e.onloadend=function(){e.readyState==e.DONE&&200==e.status&&(result=
e.response,result.name=a.substring(a.lastIndexOf("/")+1),result.lastModifiedDate=null,result.toString=function(){return"[object File]"},c=result)};e.open("GET",a,!1);e.responseType="blob";e.send(null)}catch(g){}return c};var t=function(){Object.defineProperty(this,"length",{value:0,writable:!0});Object.defineProperty(t.prototype,"getItem",{value:function(a){a=this[a];return void 0===a?null:a}});Object.defineProperty(t.prototype,"key",{value:function(a){var c=0;for(a in this)if(this.hasOwnProperty(a)){if(c==
a)return a;c++}return null}});Object.defineProperty(t.prototype,"removeItem",{value:function(a,c){this.hasOwnProperty(a)&&(delete this[a],this.length--,c||q.postMessage({action:"___O_widgetPreferences_removeItem_REQUEST",data:{key:a}}))}});Object.defineProperty(t.prototype,"setItem",{value:function(a,c,b){this[a]||this.length++;this[a]=c;b||q.postMessage({action:"___O_widgetPreferences_setItem_REQUEST",data:{key:a,val:c}})}});Object.defineProperty(t.prototype,"clear",{value:function(a){for(var c in this)this.hasOwnProperty(c)&&
delete this[c];this.length=0;a||q.postMessage({action:"___O_widgetPreferences_clear_REQUEST"})}})};t.prototype=Object.create(Storage.prototype);h=function(){A.mixin(this);this.properties=D||{};this._preferences=new t;this._preferencesSet={};q.addEventListener("controlmessage",function(a){if(a.data&&a.data.action)switch(a.data.action){case "___O_widget_setup_RESPONSE":for(var c in a.data.attrs)this.properties[c]=a.data.attrs[c];z.WIDGET_API_LOADED=!0;if(a.data._prefs)for(c in a.data._prefs)this._preferences[c]=
a.data._prefs[c],this._preferences.length++;z.WIDGET_PREFERENCES_LOADED=!0;break;case "___O_widgetPreferences_setItem_RESPONSE":this._preferences.setItem(a.data.data.key,a.data.data.val,!0);break;case "___O_widgetPreferences_removeItem_RESPONSE":this._preferences.removeItem(a.data.data.key,!0);break;case "___O_widgetPreferences_clear_RESPONSE":this._preferences.clear(!0)}}.bind(this),!1);q.postMessage({action:"___O_widget_setup_REQUEST"});b.addEventListener("beforeunload",function(){},!1)};h.prototype=
Object.create(d.prototype);h.prototype.__defineGetter__("name",function(){return this.properties.name||""});h.prototype.__defineGetter__("shortName",function(){return this.properties.name?this.properties.name.short||"":""});h.prototype.__defineGetter__("id",function(){return this.properties.id||""});h.prototype.__defineGetter__("description",function(){return this.properties.description||""});h.prototype.__defineGetter__("author",function(){return this.properties.author||""});h.prototype.__defineGetter__("authorHref",
function(){return this.properties.author?this.properties.author.href||"":""});h.prototype.__defineGetter__("authorEmail",function(){return this.properties.author?this.properties.author.email||"":""});h.prototype.__defineGetter__("version",function(){return this.properties.version||""});h.prototype.__defineGetter__("preferences",function(){return this._preferences});b.widget=b.widget||new h;var x=function(a){A.mixin(this);this.isBackground=!!a;this.length=0;chrome.browserAction.onClicked.addListener(function(){this[0]&&
this[0].dispatchEvent(new n("click",{}));this.dispatchEvent(new n("click",{}))}.bind(this));this.isBackground&&q.addEventListener("controlmessage",function(a){if(a.data&&a.data.action&&"___O_setup_toolbar_context_REQUEST"==a.data.action)if(this[0]){var b=Object.create(this[0].properties);b.badge=b.badge.properties;b.popup=b.popup.properties;a.source.postMessage({action:"___O_setup_toolbar_context_RESPONSE",data:{toolbarUIItem_obj:b}})}else a.source.postMessage({action:"___O_setup_toolbar_context_RESPONSE",
data:{toolbarUIItem_obj:void 0}})}.bind(this),!1)};x.prototype=Object.create(d.prototype);x.prototype.createItem=function(a){return new i(a)};x.prototype.addItem=function(a){a&&!(!a instanceof i)&&(this[0]=a,this.length=1,a.resolve(!0),a.apply(),a.badge.resolve(!0),a.badge.apply(),a.popup.resolve(!0),a.popup.apply())};x.prototype.removeItem=function(a){a&&!(!a instanceof i)&&(this[0]&&this[0]===a)&&(delete this[0],this.length=0,chrome.browserAction.disable(),a.dispatchEvent(new n("remove",{})),this.dispatchEvent(new n("remove",
{})))};var k=function(a){m.call(this);this.properties={};this.properties.textContent=a.textContent?""+a.textContent:a.textContent;this.properties.backgroundColor=s(a.backgroundColor);this.properties.color=s(a.color);this.properties.display="none"===String(a.display).toLowerCase()?"none":"block"};k.prototype=Object.create(B.prototype);k.prototype.apply=function(){chrome.browserAction.setBadgeBackgroundColor({color:this.backgroundColor||"#f00"});"block"===this.display?chrome.browserAction.setBadgeText({text:this.textContent||
""}):chrome.browserAction.setBadgeText({text:""})};k.prototype.__defineGetter__("textContent",function(){return this.properties.textContent});k.prototype.__defineSetter__("textContent",function(a){this.properties.textContent=""+a;"block"===this.properties.display&&j.enqueue(this,function(c){chrome.browserAction.setBadgeText({text:""+a});c()}.bind(this))});k.prototype.__defineGetter__("backgroundColor",function(){return this.properties.backgroundColor});k.prototype.__defineSetter__("backgroundColor",
function(a){this.properties.backgroundColor=s(a);j.enqueue(this,function(a){chrome.browserAction.setBadgeBackgroundColor({color:this.properties.backgroundColor});a()}.bind(this))});k.prototype.__defineGetter__("color",function(){return this.properties.color});k.prototype.__defineSetter__("color",function(a){this.properties.color=s(a)});k.prototype.__defineGetter__("display",function(){return this.properties.display});k.prototype.__defineSetter__("display",function(a){"none"===(""+a).toLowerCase()?
(this.properties.display="none",j.enqueue(this,function(a){chrome.browserAction.setBadgeText({text:""});a()}.bind(this))):(this.properties.display="block",j.enqueue(this,function(a){chrome.browserAction.setBadgeText({text:this.properties.textContent});a()}.bind(this)))});var o=function(a){m.call(this);this.properties={href:"",width:300,height:300};this.isExternalHref=!1;this.href=a.href;this.width=a.width;this.height=a.height;this.applyHrefVal=function(){return!0===this.isExternalHref?"/oex_shim/popup_resourceloader.html?href="+
b.btoa(this.properties.href)+"&w="+this.properties.width+"&h="+this.properties.height:this.properties.href+(0<this.properties.href.indexOf("?")?"&":"?")+"w="+this.properties.width+"&h="+this.properties.height}};o.prototype=Object.create(B.prototype);o.prototype.apply=function(){this.properties.href&&"undefined"!==this.properties.href&&"null"!==this.properties.href&&""!==this.properties.href?chrome.browserAction.setPopup({popup:this.applyHrefVal()}):chrome.browserAction.setPopup({popup:""})};o.prototype.__defineGetter__("href",
function(){return this.properties.href});o.prototype.__defineSetter__("href",function(a){a+="";this.isExternalHref=a.match(/^(https?:\/\/|data:)/)?!0:!1;this.properties.href=a;this.properties.href&&"undefined"!==this.properties.href&&"null"!==this.properties.href&&""!==this.properties.href?j.enqueue(this,function(a){chrome.browserAction.setPopup({popup:this.applyHrefVal()});a()}.bind(this)):chrome.browserAction.setPopup({popup:""})});o.prototype.__defineGetter__("width",function(){return this.properties.width});
o.prototype.__defineSetter__("width",function(a){a=(a+"").replace(/\D/g,"");this.properties.width=""==a?300:800>a?a:800;this.properties.href&&"undefined"!==this.properties.href&&"null"!==this.properties.href&&""!==this.properties.href?j.enqueue(this,function(a){chrome.browserAction.setPopup({popup:this.applyHrefVal()});a()}.bind(this)):chrome.browserAction.setPopup({popup:""})});o.prototype.__defineGetter__("height",function(){return this.properties.height});o.prototype.__defineSetter__("height",
function(a){a=(a+"").replace(/\D/g,"");this.properties.height=""==a?300:600>a?a:600;this.properties.href&&"undefined"!==this.properties.href&&"null"!==this.properties.href&&""!==this.properties.href?j.enqueue(this,function(a){chrome.browserAction.setPopup({popup:this.applyHrefVal()});a()}.bind(this)):chrome.browserAction.setPopup({popup:""})});var i=function(a){m.call(this);this.properties={};this.properties.disabled=a.disabled||!1;this.properties.title=a.title||"";this.properties.icon=a.icon||"";
this.properties.popup=new o(a.popup||{});this.properties.badge=new k(a.badge||{});a.onclick&&(this.onclick=a.onclick);a.onremove&&(this.onremove=a.onremove)};i.prototype=Object.create(B.prototype);i.prototype.apply=function(){chrome.browserAction.setTitle({title:this.title});this.icon&&chrome.browserAction.setIcon({path:this.icon});!0===this.disabled?chrome.browserAction.disable():chrome.browserAction.enable()};i.prototype.__defineGetter__("disabled",function(){return this.properties.disabled});i.prototype.__defineSetter__("disabled",
function(a){this.properties.disabled!==a&&(!0===a||"true"===a||1===a||"1"===a?(this.properties.disabled=!0,j.enqueue(this,function(a){chrome.browserAction.disable();a()}.bind(this))):(this.properties.disabled=!1,j.enqueue(this,function(a){chrome.browserAction.enable();a()}.bind(this))))});i.prototype.__defineGetter__("title",function(){return this.properties.title});i.prototype.__defineSetter__("title",function(a){this.properties.title=""+a;j.enqueue(this,function(a){chrome.browserAction.setTitle({title:this.title});
a()}.bind(this))});i.prototype.__defineGetter__("icon",function(){return this.properties.icon});i.prototype.__defineSetter__("icon",function(a){this.properties.icon=""+a;j.enqueue(this,function(a){chrome.browserAction.setIcon({path:this.icon});a()}.bind(this))});i.prototype.__defineGetter__("popup",function(){return this.properties.popup});i.prototype.__defineGetter__("badge",function(){return this.properties.badge});d=function(){x.call(this,!1);q.addEventListener("controlmessage",function(a){a.data&&
a.data.action&&"___O_setup_toolbar_context_RESPONSE"==a.data.action&&(void 0!==a.data.data.toolbarUIItem_obj&&null!==a.data.data.toolbarUIItem_obj&&(this[0]=new i(a.data.data.toolbarUIItem_obj),this.length=1),z.TOOLBAR_CONTEXT_LOADED=!0)}.bind(this),!1);q.postMessage({action:"___O_setup_toolbar_context_REQUEST",data:{}})};d.prototype=Object.create(x.prototype);D&&(void 0!==D.browser_action&&null!==D.browser_action)&&(l.toolbar=l.toolbar||new d);if(b.opera)v=!0,p.isReady=function(a){a.call(p);for(var a=
0,b=r.length;a<b;a++){var f=r[a];f.target[f.methodName].apply(f.target,f.args)}r=[]};else{l=function(a,c){var f=a.addEventListener;a.addEventListener=function(e,g,d){e=e+"";e.toLowerCase()===c.toLowerCase()?g===void 0||(g===null||Object.prototype.toString.call(g)!=="[object Function]")||(v?g.call(b):u[c.toLowerCase()].push(g)):f.call(a,e,g,d)};a.__defineSetter__("on"+c.toLowerCase(),function(b){a.addEventListener(c.toLowerCase(),b,false)})};var C=function(a,b,f){for(var a=a.toLowerCase(),f=new n(a,
f||{}),e=0,d=u[a].length;e<d;e++)u[a][e].call(b,f)},u={isready:[],readystatechange:[],domcontentloaded:[],load:[]},R=!1,G=!1;b.document.addEventListener("DOMContentLoaded",function c(){R=true;b.document.removeEventListener("DOMContentLoaded",c,true)},!0);b.addEventListener("load",function f(){G=true;b.removeEventListener("load",f,true)},!0);b.document.addEventListener("readystatechange",function(f){f.stopImmediatePropagation();f.stopPropagation();b.document.readyState!=="interactive"&&b.document.readyState!==
"complete"?C("readystatechange",b.document):b.document.readyState="loading"},!0);var S="uninitialized";b.document.__defineSetter__("readyState",function(b){S=b});b.document.__defineGetter__("readyState",function(){return S});l(b,"load");l(b.document,"domcontentloaded");l(b,"domcontentloaded");l(b.document,"readystatechange");var X=(new Date).getTime()+3E3;(function e(){if((new Date).getTime()>=X){console.warn("opera.isReady check timed out");G=true}else for(var d in z)if(z[d]!==true){b.setTimeout(function(){e()},
20);return}b.setTimeout(function(){if(!v){for(var d=0,e=u.isready.length;d<e;d++)u.isready[d].call(b);u.isready=[];var g=(new Date).getTime()+3E3;(function T(){var d=(new Date).getTime();if(R||G||d>=g){b.document.readyState="interactive";C("readystatechange",b.document);C("domcontentloaded",b.document,{bubbles:true});d>=g&&console.warn("document.domcontentloaded event fired on check timeout");var e=(new Date).getTime()+3E3;(function U(){var d=(new Date).getTime();if(G||d>=e){b.document.readyState=
"complete";C("readystatechange",b.document);C("load",window);d>=e&&console.warn("window.load event fired on check timeout");for(var d=0,g=r.length;d<g;d++){var h=r[d];h.target[h.methodName].apply(h.target,h.args)}r=[]}else b.setTimeout(function(){U()},50)})()}else b.setTimeout(function(){T()},50)})();v=true}},0)})();p.isReady=function(d){v?d.call(b):u.isready.push(d)}}b.opera=p}(window);
opera.isReady(function(){function b(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.search);return null==b?"":window.decodeURIComponent(b[1].replace(/\+/g," "))}var y=b("w"),s=b("h");document.body.style.minWidth=""!==y?y.replace(/\D/g,"")+"px":"300px";document.body.style.minHeight=""!==s?s.replace(/\D/g,"")+"px":"300px"});
